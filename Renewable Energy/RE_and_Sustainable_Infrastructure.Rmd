---
title: "Renewable Energy and Sustainable Infrastructure"
author: PRISMS
date: November, 2017
output:
  ioslides_presentation: 
    fig_caption: yes
    keep_md: yes
    smaller: yes
    widescreen: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(cache = T)
```

## Data Description
http://open.canada.ca/data/en/dataset/7e50d70e-f462-48ea-97f5-6c0bc48cfd14 

## Load Library
```{r message=FALSE}
library(readr)
library(dplyr)
library(tidyr)
library(ggplot2)
library(plotly)
library(knitr)
library(kableExtra)
```

## Import Datasets
```{r message=FALSE}
RE_Capacity <- read_csv("Data/Renewable_energy_Capacity.csv")
RE_Generation <- read_csv("Data/Renewable_energy_Generation.csv")
RE_Dictionary <- read_csv("Data/RE_Dictionary.csv")
```

## Tidy Datasets
```{r}
RE_Capacity <- RE_Capacity %>%
  rename(Data_Capacity = Data) %>%
  unite(RSV, Region, Source, Year)

RE_Generation <- RE_Generation %>%
  rename(Data_Generation = Data) %>%
  unite(RSV, Region, Source, Year)

RE_Full <- full_join(RE_Capacity, RE_Generation, by = "RSV") %>%
  separate(RSV, into = c("Region", "Source", "Year"), sep = "_") %>%
  rename(Capacity_MW = Data_Capacity) %>%
  rename(Generation_GWh = Data_Generation) %>%
  select(-Unit.x, -Unit.y)
```

## Renewable Energy Dataset
```{r}
kable(RE_Full, "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  scroll_box(width = "100%", height = "400px")
```

## Dataset Dictionary
```{r}
kable(RE_Dictionary, "html") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>%
  scroll_box(width = "100%", height = "400px")
```

## First Basic Plot
```{r warning=FALSE}
ggplotly(ggplot(RE_Full, aes(x = Capacity_MW, y = Generation_GWh)) +
  geom_point(aes(color = Source)))
```

## Generation vs. Year
```{r warning=FALSE}
ggplotly(ggplot(RE_Full %>% filter(Region == "BC"), aes(Year, Generation_GWh)) +
  geom_point() +
  facet_grid(Source ~ .))
```

## Generation vs. Year in facets
```{r warning=FALSE}
# Generation_GWh<=10000
Data <- filter(RE_Full, Region == "BC") 

ggplotly(ggplot(Data, mapping = aes(x = Year, y = Generation_GWh))+
  geom_point() +
  facet_wrap(~Source, ncol = 5) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)))
```